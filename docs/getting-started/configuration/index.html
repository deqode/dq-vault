<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/dq-vault/blog/rss.xml" title="dq-vault Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/dq-vault/blog/atom.xml" title="dq-vault Blog Atom Feed"><title data-react-helmet="true">configuration | dq-vault</title><meta data-react-helmet="true" property="og:url" content="https://deqode.github.io/dq-vault/docs/getting-started/configuration"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="configuration | dq-vault"><meta data-react-helmet="true" name="description" content="Set up postgres"><meta data-react-helmet="true" property="og:description" content="Set up postgres"><link data-react-helmet="true" rel="shortcut icon" href="/dq-vault/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://deqode.github.io/dq-vault/docs/getting-started/configuration"><link data-react-helmet="true" rel="alternate" href="https://deqode.github.io/dq-vault/docs/getting-started/configuration" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://deqode.github.io/dq-vault/docs/getting-started/configuration" hreflang="x-default"><link rel="stylesheet" href="/dq-vault/assets/css/styles.d9bfc96a.css">
<link rel="preload" href="/dq-vault/assets/js/runtime~main.784a2c53.js" as="script">
<link rel="preload" href="/dq-vault/assets/js/main.b0ee8bd3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dq-vault/"><img src="/dq-vault/img/vault-dq.png" alt="dq-vault Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/dq-vault/img/vault-dq.png" alt="dq-vault Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">dq-vault</b></a><a class="navbar__item navbar__link navbar__link--active" href="/dq-vault/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/deqode/dq-vault" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/dq-vault/docs/intro">Introduction üëáÔ∏è</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Getting - Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dq-vault/docs/getting-started/installation">installation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/dq-vault/docs/getting-started/configuration">configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">configuration</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="set-up-postgres"></a>Set up postgres<a class="hash-link" href="#set-up-postgres" title="Direct link to heading">#</a></h2><p>Assuming that you have PostgreSQL installed in your system, you need to create a table which will be used by Vault to
store it&#x27;s encrypted data.</p><p>Once you are into PostgreSQL shell prompt, run the following commands to create a table:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  postgres=# create database vault;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  postgres=# \c vault</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  vault=# CREATE TABLE vault_kv_store (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  parent_path TEXT COLLATE &quot;C&quot; NOT NULL,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path        TEXT COLLATE &quot;C&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  key         TEXT COLLATE &quot;C&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       BYTEA,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  CONSTRAINT pkey PRIMARY KEY (path,key)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  vault=# CREATE INDEX parent_path_idx ON vault_kv_store (parent_path);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="populate-config-file"></a>Populate config file<a class="hash-link" href="#populate-config-file" title="Direct link to heading">#</a></h2><p>This is the step where we define the vault configurations. Vault supports .hcl files to write your configurations and
set-up vault accordingly.</p><p>Given below is an example of a config.hcl file:</p><p><strong>config.hcl</strong>-</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"> disable_mlock = true</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> ui            = true</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> storage &quot;postgresql&quot; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   connection_url = &quot;postgres://role:password@localhost:5432/databaseName?sslmode=disable&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   table = &quot;tableName&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span></span><span class="token-line" style="color:#393A34"><span class="token plain"> listener &quot;tcp&quot; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  address     = &quot;127.0.0.1:8200&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  tls_disable = &quot;true&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> plugin_directory = &quot;/$HOME/etc/vault/plugins/vault_plugin&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> api_addr = &quot;http://127.0.0.1:8200&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>config.hcl</strong> without postgres storage-</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"> disable_mlock = true</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> ui            = true</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> listener &quot;tcp&quot; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  address     = &quot;127.0.0.1:8200&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  tls_disable = &quot;true&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> storage &quot;file&quot; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  path = &quot;/$HOME/etc/tmp/vault-data&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> plugin_directory = &quot;/$HOME/etc/vault/plugins/vault_plugin&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> api_addr = &quot;http://127.0.0.1:8200&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><p><code>api_addr</code> defines the access port of vault. All the requests to vault will be done via this port.</p></li><li><p><code>Storage</code> defines the backend-storage type that vault will use to store all the encrypted data. Since this
backend-storage is not a part of the vault, we define the access port of PostgreSQL server and the table name which is
already created. Change the role, password, databaseName, and tableName according to your postgres parameters. <strong>Note
that we have disabled SSL for database requests</strong>.</p></li><li><p>In the <code>listener</code> part we have disabled TLS. If activated, TLS certificates and keys have to be provided here also.
The example above listens on localhost port 8200 without TLS.</p></li><li><p>Lastly, we have defined the <code>plugin directory</code> where the vault looks for plugins. Remember to change this according to
your desired path where you stored the Vault bin file earlier.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="vault-setup"></a>Vault Setup<a class="hash-link" href="#vault-setup" title="Direct link to heading">#</a></h2><p>Once you have created the config.hcl configuration file, we can now start our vault server. Open the terminal in the
folder containing the config file and start the server by running the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    $ sudo vault server -config=config.hcl</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now that the vault server is up and running, it is actually in a sealed state, that is vault functionalities can&#x27;t be
accessed yet. To access vault we need to unseal it. First, open another terminal window and initialize vault by running
the following commands:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    $ export VAULT_ADDR=&#x27;http://127.0.0.1:8200&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    $ vault operator init</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The first command is required for non-TLS mode. The output is a set of 5 shamir keys which have the capability to unseal
vault and an initial root token. Here vault is initialized in such a way that any 3 keys out of 5 are enough to unseal
vault. The root token is used to login into the vault. Only after logging in, you can start using vault. Store these in
a safe place for later use.</p><p>Start the unsealing process by running the command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    $ vault operator unseal</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The vault will ask you for an unseal key. Provide any one of the above 5. Run this command two more times and provide
two other keys. Vault should be unsealed now. To verify run the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    $ vault status</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The output should be something like this</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  Key             Value</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ---             -----</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Seal Type       shamir</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Sealed          false &lt;----this</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Total Shares    5</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Threshold       3</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Version         0.11.0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Cluster Name    vault-cluster-8dea58da</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Cluster ID      8ac011b1-a830-663f-715a-cf5b3f87ae54</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  HA Enabled      false</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you see the sealed key to have value false, vault is unsealed.</p><p>Now it&#x27;s time to log in as the root admin. Run the command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    $ vault login 85de6efd-d036-9f0d-1c64-5e18e63adee9</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Provide your <code>root-token</code> in the above command and you should be logged in to vault as admin. Now we can send requests
to vault and set-up our plugin.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="enable-plugin"></a>Enable plugin<a class="hash-link" href="#enable-plugin" title="Direct link to heading">#</a></h2><ul><li><p>If you previously have enabled this plugin, you need to disable it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  $ vault secrets disable /api</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Calculate the SHA256 of the plugin and register it in Vault&#x27;s plugin catalog.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  $ export SHA256=$(shasum -a 256 &quot;/etc/vault/plugins/vault_plugin&quot; | cut -d&#x27; &#x27; -f1)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ vault write sys/plugins/catalog/secrets-api \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      sha_256=&quot;${SHA256}&quot; \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      command=&quot;vault_plugin&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Mount the secrets engine</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  $ vault secrets enable \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    -path=&quot;api&quot; \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    -plugin-name=&quot;secrets-api&quot; \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    plugin</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-policies-for-application-server"></a>Creating policies for application server<a class="hash-link" href="#creating-policies-for-application-server" title="Direct link to heading">#</a></h2><p>We need to define policies for the application server that will be using our vault. We don&#x27;t want our application server
to have complete root access of vault, rather, it should just have the capability to update our Vault API plugin that we
just enabled. For that, we need to create another .hcl file (application.hcl as an example) to define the policies.</p><p>application.hcl:-</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  path &quot;api/*&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    capabilities = [&quot;read&quot;, &quot;update&quot;]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To register this policy in vault, open terminal in the directory containing application.hcl and run the following
command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  $ vault policy write application application.hcl</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now we can use application policy to define access capabilities of anyone using vault. More on that later.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="enable-userpass-authentication-method"></a>Enable userpass authentication method<a class="hash-link" href="#enable-userpass-authentication-method" title="Direct link to heading">#</a></h2><p>We want our application server to login into vault using a particular <code>username</code> and <code>password</code> and should have access
capabilities defined by the <code>application</code> policy we created earlier. In order to do this we will be enabling userpass
authentication method.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  $ vault auth enable userpass</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We then create a username and password using which our application server will log in. We also attach the application
policy in this command. The following command creates a user with username-&quot;appserver&quot; and password-&quot;secret&quot; with
application policy attached:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  $ vault write auth/userpass/users/appserver password=secret policies=application</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We then give these credentials to the application server, who will use this username and password to login into the
vault. Note that anyone logged in by this method will have capabilities defined by the application policy.</p><p>We can easily create multiple user login credentials for different application servers.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/getting-started/configuration.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dq-vault/docs/getting-started/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dq-vault/docs/guides/plugin-usage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">plugin-usage ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#set-up-postgres" class="table-of-contents__link">Set up postgres</a></li><li><a href="#populate-config-file" class="table-of-contents__link">Populate config file</a></li><li><a href="#vault-setup" class="table-of-contents__link">Vault Setup</a></li><li><a href="#enable-plugin" class="table-of-contents__link">Enable plugin</a></li><li><a href="#creating-policies-for-application-server" class="table-of-contents__link">Creating policies for application server</a></li><li><a href="#enable-userpass-authentication-method" class="table-of-contents__link">Enable userpass authentication method</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/dq-vault/docs/intro">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/deqodesolutions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/deqode" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://deqode.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/dq-vault/img/deq.svg" alt="Deqode logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/dq-vault/img/deq.svg" alt="Deqode logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright ¬© 2021 Deqode, Inc.</div></div></div></footer></div>
<script src="/dq-vault/assets/js/runtime~main.784a2c53.js"></script>
<script src="/dq-vault/assets/js/main.b0ee8bd3.js"></script>
</body>
</html>